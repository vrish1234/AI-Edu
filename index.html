<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>AI-Edura</title>
  <link rel="stylesheet" href="style.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Poppins&display=swap" rel="stylesheet"/>
</head>
<body>

<!-- Login/Register -->
<div class="container" id="authContainer">
  <div class="card" id="loginCard">
    <h2>Login</h2>
    <input type="email" id="loginEmail" placeholder="Email">
    <input type="password" id="loginPassword" placeholder="Password">
    <button onclick="loginUser()">Login</button>
    <p>Don't have an account? <a onclick="showRegister()">Register</a></p>
  </div>
  <div class="card" id="registerCard" style="display:none;">
    <h2>Register</h2>
    <input type="text" id="regName" placeholder="Name">
    <input type="email" id="regEmail" placeholder="Email">
    <input type="password" id="regPassword" placeholder="Password">
    <button onclick="registerUser()">Register</button>
    <p>Already have an account? <a onclick="showLogin()">Login</a></p>
  </div>
</div>

<!-- Chat Interface -->
<div id="chatInterface" style="display:none;">
  <div class="header">
    <h2>🎓AI-Edura </h2>
    <div>
      <span id="themeIcon" class="theme-toggle" onclick="toggleTheme()">🌙</span>
      <button onclick="logoutUser()" class="logoutBtn">Logout</button>
    </div>
  </div>

  <div id="chatScroll" class="chat-box"></div>
  </div>
  </div>

  <div id="inputBar">
    <select id="language" onchange="selectLanguage(this.value)">
        <option>English</option>
        <option>Hindi</option>
        <option>Bhojpuri</option>
        <option>Tamil</option>
        <option>Telugu</option>
        <option>Bengali</option>
        <option>Magahi</option>
        <option>Maithili</option>
        <option>Punjabi</option>
        <option>Rajasthani</option>
        <option>Gujarati</option>
    </select>

    <textarea id="question" placeholder="Type your question..."></textarea>

    <div class="input-icons">
      <button onclick="startVoiceInput()" title="Voice Input">🎤</button>
      <button onclick="captureImage()" title="Upload Image">📷</button>
    </div>

    <button id="sendBtn" onclick="sendQuestion()">➤</button>
  </div>
  <h3>About AI-Edura</h3>
      <p>AI-Edura is an AI-powered educational platform where students can ask questions via text, voice, or image. The system provides instant answers, short notes for revision, and audio/video explanations in multiple Indian languages.</p>
      <p>Developed by <strong>Vrishketu Ray</strong> | <a href="mailto:vrishketuray@gmail.com">vrishketuray@gmail.com</a></p>
    </div>
</div>

<!-- Login/Register Script -->
<script>
  function showRegister() {
    document.getElementById('loginCard').style.display = 'none';
    document.getElementById('registerCard').style.display = 'block';
  }
  function showLogin() {
    document.getElementById('registerCard').style.display = 'none';
    document.getElementById('loginCard').style.display = 'block';
  }
  function registerUser() {
    const name = document.getElementById('regName').value.trim();
    const email = document.getElementById('regEmail').value.trim();
    const password = document.getElementById('regPassword').value.trim();
    if (!name || !email || !password) {
      alert("Please fill all fields.");
      return;
    }
    localStorage.setItem('user', JSON.stringify({ name, email, password }));
    alert("Registration successful. Please login.");
    showLogin();
  }
  function loginUser() {
    const email = document.getElementById('loginEmail').value.trim();
    const password = document.getElementById('loginPassword').value.trim();
    const user = JSON.parse(localStorage.getItem('user'));
    if (user && user.email === email && user.password === password) {
      document.getElementById('authContainer').style.display = 'none';
      document.getElementById('chatInterface').style.display = 'block';
      localStorage.setItem('isLoggedIn', 'true');
    } else {
      alert("Invalid email or password.");
    }
  }
  function logoutUser() {
    localStorage.removeItem('isLoggedIn');
    document.getElementById('authContainer').style.display = 'block';
    document.getElementById('chatInterface').style.display = 'none';
  }
  function toggleTheme() {
    document.body.classList.toggle('dark');
    const themeIcon = document.getElementById('themeIcon');
    themeIcon.textContent = document.body.classList.contains('dark') ? '☀️' : '🌙';
    localStorage.setItem('theme', document.body.classList.contains('dark') ? 'dark' : 'light');
  }
  window.addEventListener('DOMContentLoaded', () => {
    const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
    if (isLoggedIn) {
      document.getElementById('authContainer').style.display = 'none';
      document.getElementById('chatInterface').style.display = 'block';
    }
    const theme = localStorage.getItem('theme');
    if (theme === 'dark') {
      document.body.classList.add('dark');
      document.getElementById('themeIcon').textContent = '☀️';
    }
  });
</script>

<!-- OCR + Chat Logic -->
<script src="https://cdn.jsdelivr.net/npm/tesseract.js@2/dist/tesseract.min.js"></script>
<script src="main.js"></script>
</body>
</html>
